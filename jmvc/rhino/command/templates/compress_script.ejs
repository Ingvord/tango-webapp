//js apps/<%= application_name %>/compress.js

MVCOptions = {
    onload: false,
    show_files: true,
    compress_callback: function(total){
        var collected = MVCOptions.collect(total);
        MVCOptions.save('apps/<%= application_name %>/collected.js', collected);
        print("Compiler output start >>>>>>");
        MVCOptions.compress('apps/<%= application_name %>/collected.js','apps/<%= application_name %>/production.js');
        print("<<<<<< Compiler output end.");
        MVCOptions.remove('apps/<%= application_name %>/collected.js');
        print("Compressed to 'apps/<%= application_name %>/production.js'.");

        MVCOptions.compress.apply(null,
            TangoWebappPlatform.ui._webix_files.map(function (webix_file) {
            return 'resources/webix_widgets/' + webix_file + '.js';
        }).concat(['apps/<%= application_name %>/webix.js']));

        print("Compressed to 'apps/<%= application_name %>/webix.js'.");

        quit();
    },
    env: "compress"
}
load('jmvc/rhino/compression/setup.js');
window.location = 'apps/<%= application_name %>/compress.html';
